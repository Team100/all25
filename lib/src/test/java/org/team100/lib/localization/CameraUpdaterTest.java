package org.team100.lib.localization;

import static org.junit.jupiter.api.Assertions.assertEquals;

import java.io.IOException;

import org.junit.jupiter.api.Test;
import org.team100.lib.config.Camera;
import org.team100.lib.util.Util;

import edu.wpi.first.math.geometry.Pose2d;
import edu.wpi.first.math.geometry.Pose3d;
import edu.wpi.first.math.geometry.Rotation2d;
import edu.wpi.first.math.geometry.Transform3d;

class CameraUpdaterTest {
    private static final boolean kActuallyPrint = false;

    @Test
    void testRotation() throws IOException {
        Pose3d tagInFieldCoords = new Pose3d();
        Transform3d aprilTagTransform = PoseEstimationHelper.getTransformFromRobotPose(Camera.TEST2.getOffset(),
                new Pose2d(1, tagInFieldCoords.getY(), new Rotation2d(Math.PI)), tagInFieldCoords);
        assertEquals(aprilTagTransform.getX(), 0, 0.0001);
        if (kActuallyPrint)
            Util.println("APRIL TAG TRANSFORM: " + aprilTagTransform);
    }

    @Test
    void testRotation2() {
        Pose3d tagInFieldCoords = new Pose3d();
        Transform3d aprilTagTransform = PoseEstimationHelper.getTransformFromRobotPose(Camera.TEST4.getOffset(),
                new Pose2d(1, tagInFieldCoords.getY(), new Rotation2d(Math.PI)), tagInFieldCoords);
        assertEquals(aprilTagTransform.getX(), 0, 0.0001);
        if (kActuallyPrint)
            Util.println("APRIL TAG TRANSFORM: " + aprilTagTransform);
    }

    @Test
    void testRotation3() {
        Pose3d tagInFieldCoords = new Pose3d();
        Transform3d aprilTagTransform = PoseEstimationHelper.getTransformFromRobotPose(Camera.TEST4.getOffset(),
                new Pose2d(1, tagInFieldCoords.getY(), new Rotation2d(Math.PI)), tagInFieldCoords);
        assertEquals(aprilTagTransform.getX(), 0, 0.0001);
        if (kActuallyPrint)
            Util.println("APRIL TAG TRANSFORM: " + aprilTagTransform);
    }
}
